# 浙江大学实验报告

课程名称：计算机动画
实验类型：综合
实验项目名称：***基于Opencv和Dlib的二维人脸图像morphing***
学生姓名：朱镐哲
专业：信息安全
学号：3210103283
指导老师：金小刚
实验地点：玉泉
实验日期：2023年10月30日

## 一、实验目的和要求

实现基于

## 二、实验内容和原理



## 三、实验环境

实验编译运行平台：win11 visual studio2022


## 四、实验步骤

### 步骤零：图像预处理

这一部分虽然是步骤零，但是却是我最后加上去的一部分代码，因为这是在我进行了数据测试之后所想到的，通过图像的预处理，程序可以实现更多的功能且能在一定程度上提高处理效果。

在实际情况中，一张图片可能会有多张人脸，而且人脸会有不同的大小（比如相同大小下，一寸照的人脸和全身照的人脸），如果直接进行morphing，效果不好，所以需要对图像进行一定的预处理。

图像预处理的函数是

```c++
int faceDetectionandCut(dlib::array2d<dlib::rgb_pixel>& img, std::string img_name, shape_predictor sp) { //参数依次为：通过rgb模式读入的彩色img，img图像源文件的名称，面部关键点检测器模型
```

顾名思义，预处理首先对输入的图片进行人脸检测，如果只有一张人脸，那么询问是否进行裁剪，如果有多张人脸，那么默认进行裁剪。在裁剪的时候，我们使用形状检测器来检测人脸的面部特征点，然后遍历面部特征点，记录`left_max` `right_max` `top_max` `bottom_max`四个边界的值，然后进行一定比例的延伸，并以人脸为中心进行裁剪，裁剪过程中也会进行检测（避免人脸在图片过于边缘的位置而导致裁剪越界的情况）。如果检测到多个人脸，则在图像上绘制矩形框，用于标记面部，并让用户选择一个面部（会在窗口中显示出来）进行裁切，裁切步骤与单张脸相似。

代码

## 五、实验结果与分析



## 六、实验感想与心得
